<!doctype html>
<html lang="th">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shopping Cart - Nexus Wear</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&amp;family=Bebas+Neue&amp;display=swap" rel="stylesheet">
  <style>
        /* CSS เดิมทั้งหมดของคุณ - ห้ามลบหรือแก้ไข */
        body { box-sizing: border-box; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { height: 100%; overflow-x: hidden; }
        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; background: #FFFFFF; color: #000000; line-height: 1.6; -webkit-font-smoothing: antialiased; }
        .page-wrapper { width: 100%; min-height: 100%; display: flex; flex-direction: column; }

        /* Navigation */
        .top-nav { background: #FFFFFF; border-bottom: 2px solid #000000; position: sticky; top: 0; z-index: 1000; }
        .nav-content { max-width: 1600px; margin: 0 auto; padding: 0 60px; display: flex; align-items: center; justify-content: space-between; height: 80px; }
        .logo-text { font-family: 'Bebas Neue', cursive; font-size: 28px; text-decoration: none; color: #000000; letter-spacing: 2px; }
        .cart-badge { background: #000; color: #fff; font-size: 11px; padding: 2px 6px; border-radius: 10px; margin-left: 5px; }

        /* Cart Page Layout */
        .cart-main { flex: 1; max-width: 1600px; margin: 0 auto; padding: 60px; width: 100%; }
        .cart-header { margin-bottom: 48px; border-bottom: 4px solid #000; padding-bottom: 24px; }
        .cart-title { font-family: 'Bebas Neue', cursive; font-size: 64px; }

        .cart-grid { display: grid; grid-template-columns: 1fr 400px; gap: 60px; align-items: start; }

        /* Items List */
        .cart-items { display: flex; flex-direction: column; gap: 32px; }
        .cart-item { display: grid; grid-template-columns: 150px 1fr auto; gap: 32px; padding-bottom: 32px; border-bottom: 1px solid #EEE; align-items: center; }
        .item-img { width: 150px; height: 180px; background: #F5F5F5; border: 2px solid #000; object-fit: cover; }
        .item-info { display: flex; flex-direction: column; gap: 8px; }
        .item-name { font-family: 'Bebas Neue', cursive; font-size: 28px; text-decoration: none; color: #000; }
        .item-meta { font-size: 13px; font-weight: 700; color: #666; text-transform: uppercase; }
        .item-price { font-size: 18px; font-weight: 800; }

        .item-controls { display: flex; flex-direction: column; align-items: flex-end; gap: 16px; }
        .qty-box { display: flex; align-items: center; border: 2px solid #000; }
        .qty-btn { padding: 8px 16px; background: none; border: none; cursor: pointer; font-weight: 700; }
        .qty-val { padding: 0 16px; font-weight: 700; border-left: 2px solid #000; border-right: 2px solid #000; }
        .remove-btn { background: none; border: none; color: #FF0000; font-size: 12px; font-weight: 700; cursor: pointer; text-transform: uppercase; text-decoration: underline; }

        /* Summary */
        .cart-summary { background: #F5F5F5; padding: 40px; border: 3px solid #000; position: sticky; top: 120px; }
        .summary-row { display: flex; justify-content: space-between; margin-bottom: 16px; font-weight: 600; }
        .total-row { border-top: 2px solid #000; margin-top: 24px; padding-top: 24px; font-size: 24px; font-weight: 900; }
        
        .checkout-btn { 
            width: 100%; padding: 24px; background: #000; color: #FFF; border: none; 
            font-weight: 800; text-transform: uppercase; margin-top: 32px; cursor: pointer;
            clip-path: polygon(5% 0%, 95% 0%, 100% 50%, 95% 100%, 5% 100%, 0% 50%);
            transition: transform 0.3s;
        }
        .checkout-btn:hover { transform: scale(1.02); }
        .checkout-btn:disabled { background: #CCC; cursor: not-allowed; transform: none; }

        .empty-cart { text-align: center; padding: 100px 0; }
        .continue-btn { display: inline-block; margin-top: 24px; padding: 16px 40px; background: #000; color: #FFF; text-decoration: none; font-weight: 700; }

        @media (max-width: 1024px) {
            .cart-grid { grid-template-columns: 1fr; }
            .cart-main { padding: 30px 24px; }
            .cart-item { grid-template-columns: 100px 1fr auto; gap: 16px; }
            .item-img { width: 100px; height: 120px; }
        }
    </style>
 </head>
 <body>
  <div class="page-wrapper">
   <header class="top-nav">
    <nav class="nav-content">
     <a href="index.html" class="logo-text">NEXUS WEAR</a>
     <div>
        <a href="index.html" style="text-decoration:none; color:#000; font-weight:700; font-size:14px;">CONTINUE SHOPPING</a>
     </div>
    </nav>
   </header>

   <main class="cart-main">
    <div class="cart-header">
     <h1 class="cart-title">YOUR CART</h1>
    </div>

    <div id="cartContent" class="cart-grid">
     <div class="cart-items" id="cartItemsContainer">
        </div>

     <div class="cart-summary">
      <h3 style="font-family:'Bebas Neue'; font-size:32px; margin-bottom:24px;">ORDER SUMMARY</h3>
      <div class="summary-row">
       <span>SUBTOTAL</span>
       <span id="subtotal">฿0</span>
      </div>
      <div class="summary-row">
       <span>SHIPPING</span>
       <span>FREE</span>
      </div>
      <div class="total-row summary-row">
       <span>TOTAL</span>
       <span id="totalAmount">฿0</span>
      </div>
      <button class="checkout-btn" id="checkoutBtn">PROCEED TO CHECKOUT</button>
      <p style="font-size:10px; margin-top:16px; text-align:center; color:#666;">Tax included and shipping calculated at checkout</p>
     </div>
    </div>

    <div id="emptyState" class="empty-cart" style="display:none;">
        <h2 style="font-family:'Bebas Neue'; font-size:48px;">YOUR CART IS EMPTY</h2>
        <p>Looks like you haven't added anything yet.</p>
        <a href="index.html" class="continue-btn">START SHOPPING</a>
    </div>
   </main>

   <footer style="padding:40px; text-align:center; border-top:1px solid #EEE; margin-top:auto;">
    <p style="font-size:12px; font-weight:600; letter-spacing:1px;">© 2024 NEXUS WEAR. LOCAL STYLE, GLOBAL STANDARD.</p>
   </footer>
  </div>

  <script>
    /**
     * ============================================================
     * NEXUS WEAR - CART ENGINE (Professional Standard)
     * ============================================================
     */

    const CartManager = {
        key: 'nexus_wear_cart',
        getCart() {
            return JSON.parse(localStorage.getItem(this.key)) || [];
        },
        saveCart(cart) {
            localStorage.setItem(this.key, JSON.stringify(cart));
            renderCartPage(); // Re-render whenever data changes
        },
        updateQty(id, size, delta) {
            let cart = this.getCart();
            const item = cart.find(i => i.id === id && i.size === size);
            if (item) {
                item.qty += delta;
                if (item.qty < 1) return this.removeItem(id, size);
                this.saveCart(cart);
            }
        },
        removeItem(id, size) {
            let cart = this.getCart();
            cart = cart.filter(i => !(i.id === id && i.size === size));
            this.saveCart(cart);
        }
    };

    function renderCartPage() {
        const cart = CartManager.getCart();
        const container = document.getElementById('cartItemsContainer');
        const emptyState = document.getElementById('emptyState');
        const cartContent = document.getElementById('cartContent');
        const subtotalEl = document.getElementById('subtotal');
        const totalEl = document.getElementById('totalAmount');
        const checkoutBtn = document.getElementById('checkoutBtn');

        if (cart.length === 0) {
            cartContent.style.display = 'none';
            emptyState.style.display = 'block';
            return;
        }

        cartContent.style.display = 'grid';
        emptyState.style.display = 'none';

        let total = 0;
        container.innerHTML = cart.map(item => {
            const itemTotal = item.price * item.qty;
            total += itemTotal;
            return `
                <div class="cart-item">
                    <img src="${item.image}" alt="${item.name}" class="item-img">
                    <div class="item-info">
                        <div class="item-meta">STREETWEAR COLLECTION</div>
                        <a href="product.html?id=${item.id}" class="item-name">${item.name}</a>
                        <div class="item-meta">SIZE: ${item.size}</div>
                        <div class="item-price">฿${item.price.toLocaleString()}</div>
                    </div>
                    <div class="item-controls">
                        <div class="qty-box">
                            <button class="qty-btn" onclick="CartManager.updateQty('${item.id}', '${item.size}', -1)">-</button>
                            <span class="qty-val">${item.qty}</span>
                            <button class="qty-btn" onclick="CartManager.updateQty('${item.id}', '${item.size}', 1)">+</button>
                        </div>
                        <button class="remove-btn" onclick="CartManager.removeItem('${item.id}', '${item.size}')">Remove</button>
                    </div>
                </div>
            `;
        }).join('');

        subtotalEl.innerText = `฿${total.toLocaleString()}`;
        totalEl.innerText = `฿${total.toLocaleString()}`;
        
        checkoutBtn.onclick = () => {
            window.location.href = 'checkout.html';
        };
    }

    // Initial Load
    document.addEventListener('DOMContentLoaded', renderCartPage);
  </script>
 </body>
</html>
